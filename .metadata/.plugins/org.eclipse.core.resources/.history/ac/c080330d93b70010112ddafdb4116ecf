package com.api.pjpPequenosPassos.model;

import com.fasterxml.jackson.annotation.JsonBackReference;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import jakarta.persistence.*;
import lombok.*;

import java.io.Serializable;
import java.util.UUID;

@Entity
@Table(name = "tb_crianca")
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Builder
@JsonIgnoreProperties({"hibernateLazyInitializer", "handler"})
public class Crianca implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private UUID id;

    private String nome;
    private String dataNascimento;
    private String sexo;

    // ====== MUITAS CRIANÇAS PARA 1 USUÁRIO ======
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "usuario_id")       // coluna FK na tabela da criança
    @JsonBackReference("usuario-crianca")  // fecha o par com o Usuario
    private Usuario usuario;

    // se você tiver outros relacionamentos aqui (agenda, etc.)
    // pode manter, não conflita com esse.
}
